{% extends 'base.html' %} {% block content %}
<div class="row">

    <div class="col-xs-12">
        
        <div class="search-box">
            <p><b>Refine Search by:</b></p>
            <div class="search_btn">
                <P id='ingredient_btn' class='search-btn'>Ingredient</P>
            </div>
            <div class="search_btn">
                <P id='cuisine_btn' class='search-btn'>Cuisine</P>
            </div>
            <div class="search_btn">
                <P id='allergen_btn' class='search-btn'>Allergen</P>
            </div>
            <div class="search_btn">
                <P id='allergen_and_cuisine_btn' class='search-btn'>Cuisine and Allergen</P>
            </div>
        </div>    
            <!--########################## INGREDIENT FORM-->
            <div id="ingredient_search" class="search_category_box">
                <div class="inner-box inline">
                <form action="{{url_for('find_ingredient')}}" , method="POST">
                    <p><b>Search by Ingredient</b></p>
                    <div class="inline">
                        <input type="text" name="ingredient_category" id="ingredient_category" placeholder='e.g. chicken'>
                    </div>
                    <br>
                    <br>
                    <div class="center">
                        <input class="inline" type="submit" value="Select" />
                        <p class="close-btn inline">Close</p>
                    </div>
                    
                </form>
                </div>
            </div>
            <!--########################## CUISINE FORM-->
            
            <div id="cuisine_search" class="search_category_box">
                <div class="inner-box inline">
                <form action="{{url_for('find_cuisine')}}" , method="POST">
                    <p><b>Select Cuisine</b></p>
                    <div class="inline">
                        <select  name="cuisine_category" id="cuisine_category">
                        <option disabled value="" selected>None Selected</option>
                        {% for item in cuisines_json.cuisine|sort %}
                        <option value="{{ item }}">{{ item }}</option>
                        {% endfor %}
                        </select>
                    </div>
                    <br>
                    <br>
                    <div class="center">
                        <input class="inline" type="submit" value="Select" />
                        <p class="close-btn inline">Close</p>
                    </div>
                    
                </form>
                </div>
            </div>
            
            <!--########################## END FORM-->
            <!--########################## ALLERGEN FORM-->
            
            <div id="allergen_search" class="search_category_box">
                <div class="inner-box inline">
                <form action="{{url_for('find_allergen')}}" , method="POST">
                <p><b>Select allergen free</b></p>
                    
                    {% for item in allergens_json.allergen|sort %}
                    <div class='allergen_checkbox'>
                        <input value="{{ item }}" name="allergen_category" type="checkbox"> {{ item }}</input>
                    </div>
                    {% if loop.index % 3 == 0 %}
                    <br>
                    {% endif%}
                    {% endfor %}
                    <br>
                    <br>
                    <div class="center">
                        <input class="inline" type="submit" value="Select" />
                        <p class="close-btn inline">Close</p>
                    </div>
                    
                </form>
            </div>
            </div>
            
            <!--########################## END FORM-->
            <!--########################## ALLERGEN AND CUISINE FROM-->
            <div id="allergen_and_cuisine_search" class="search_category_box">
                <div class="inner-box inline">
                <form action="{{url_for('find_cuisine_and_allergen')}}" , method="POST">
                    <p><b>Select Cuisine</b></p>
                    <div>
                        <select class="search-item" name="find_and_cuisine" id="find_and_cuisine" required>
                            <option value="" disabled selected>None Selected</option>
                            {% for item in cuisines_json.cuisine|sort %}
                            <option value="{{ item }}">{{ item }}</option>
                            
                            
                            {% endfor %}
                        </select>
                    </div>
                    <br>
                    
                    <p><b>Select allergen free</b></p>
                        {% for item in allergens_json.allergen|sort %}
                    <div class='allergen_checkbox'>
                        <input value="{{ item }}" name="find_and_allergen" id="find_and_allergen" type="checkbox"> {{ item }}</input>
                    </div>
                    
                    {% if loop.index % 3 == 0 %}
                    <br>
                    {% endif%}
                    
                    {% endfor %}
                    <br>
                    <br>
                    <div class="center">
                        <input class="inline" type="submit" value="Select" />
                        <p class="inline close-btn">Close</p>
                    </div>
                    
                </form>
            </div>
            </div>
            <!--########################## END FORM-->
        
    </div>
</div>

<div class="row">
    <div class="col-xs-12">
        {% for recipe in recipes %}
        <div class="row">
            <div class="col-xs-12">
                <h3>{{ recipe.name }}</h3>
                <div class="col-xs-12">
                    <p>By {{ recipe.author }}</p>
                </div>
                <a href="{{ url_for('edit_recipe', recipe_id=recipe._id)}}">Edit Recipe</a>
                <a href="{{ url_for('delete_recipe', recipe_id=recipe._id)}}">Delete Recipe</a>

            </div>
        </div>
        <div class="row">
            <div class="col-xs-1">

                <b>Cuisine</b> {% for item in recipe.cuisine|sort %}
                <p>{{ item }}</p>
                {% endfor %}
            </div>

            <div class="col-xs-1">

                <b>Allergens</b> {% for item in recipe.allergens|sort %}
                <p>{{ item }}</p>
                {% endfor %}

            </div>

        </div>

        <div class="row">
            <div class="col-xs-7">
                <div class="row">
                    <div class="col-xs-12">
                        <p>{{ recipe.description }}</p>
                    </div>
                    <div class="col-xs-12">
                        <span><b>Prep Time:</b> {{ recipe.prep_time }}</span>
                        <span><b>Cook Time:</b> {{ recipe.cook_time }}</span>
                        <span><b>Servings: </b> {{ recipe.recipe_yield }}</span>
                    </div>

                    <div class="col-xs-12">
                        <h4>Ingredients</h4>
                    </div>
                    <div class="col-xs-12">
                        <ul>
                            {% for ingredient in recipe.ingredients %} {% if ingredient != ""%}
                            <li>{{ ingredient }}</li>
                            {% endif %} {% endfor %}
                        </ul>
                    </div>
                </div>
            </div>

            <div class="col-xs-5">
                <img src="{{ recipe.image }}"></img>
            </div>
        </div>

        <div class="row">
            <div class="col-xs-12">
                <h4>Insdivuctions</h4>
            </div>
            <div class="col-xs-12">
                <ul>
                    {% for instruction in recipe.instructions %}
                    <li>
                        {{ instruction }}
                    </li>
                    {% endfor %}
                </ul>
            </div>
        </div>




        {% endfor %}
    </div>
</div>


{% endblock %}
