{% extends 'base.html' %} {% block content %}

<main class="container main-container margin-top-20">
    
    <div class="row">
        <p class="my-recipe-heading">Recipes</p>
    </div>
<!--FORMS FOR SEARCHING CRITERIA BY CUISINE, ALLERGEN OR INGREDIENT -->
 {% block search_menu %}
	{% include 'search_menu.html' %}
	{% endblock search_menu %}   

<div class="row ordered-by-row">
    <div class="col-xs-12 col-sm-5">
        <p class="ordered-by-title">Most Popular Recipes</p>
        <a href="{{url_for('most_popular_recipes')}}" class="see-all">See All</a>
    </div>
</div>

<!--THE ROW FOR THE 4 MOST POPULAR RECIPES -->
<div class="row found_recipe_row">
{% for recipe in most_popular_recipes %}

    <div class="single-recipe-result col-xs-12 col-sm-4 col-md-3">
        <div class="inner_recipe_box">
            <div class="row">
                <div class="col-xs-12 found_image_box">
                    <a href="{{ url_for('update_view_count', recipe_id=recipe._id)}}">
                    <img class="found_image" onerror="this.src='https://upload.wikimedia.org/wikipedia/commons/b/b1/Missing-image-232x150.png'" src="{{ recipe.image }}" alt=" {{ recipe.name }}">
                    </a>
                </div>
                
                <div class=" name_box col-xs-12 center">
                    <h4><b>{{ recipe.name }}</b></h4>
                </div>
                
                <div class=" allergen_box col-xs-12">
                    
                <p>{{ recipe.description |truncate(65) }}</p>
                
                </div>
                
                <div class=" allergen_box col-xs-12">
                    <div><b>Allergens</b></div>
                    
                {% for item in recipe.allergens %}
                {% if loop.index == 0 or item == "" %}
                <p>None</p>
                {% else %}
                    <span>{{ item | title}}</span>
                {% endif %}
                {% endfor %}
                
                </div>
                
                <div class="cuisine_box col-xs-12">
                    <div><b>Cuisine</b></div>
                {% for item in recipe.cuisine %}
                {% if loop.index == 0 or item == "" %}
                <p>None</p>
                {% else %}
                    <span>{{ item |title}}</span>
                {% endif %}
                {% endfor %}
                </div>
            </div>
        </div>
    </div>
    
{% endfor %}
</div>

<div class="row ordered-by-row">
    <div class="col-xs-12 col-sm-5">
        <p class="ordered-by-title">New Recipes</p>
        <a href="{{url_for('new_recipes')}}" class="see-all">See All</a>
    </div>
</div>

<!--THE ROW FOR THE 4 MOST VIEWED RECIPES -->
<div class="row found_recipe_row">
{% for recipe in new_recipes %}

    <div class="single-recipe-result col-xs-12 col-sm-4 col-md-3">
        <div class="inner_recipe_box">
            <div class="row">
                <div class="col-xs-12 found_image_box">
                    <a href="{{ url_for('update_view_count', recipe_id=recipe._id)}}">
                    <img class="found_image" onerror="this.src='https://upload.wikimedia.org/wikipedia/commons/b/b1/Missing-image-232x150.png'" src="{{ recipe.image }}" alt=" {{ recipe.name }}">
                    </a>
                </div>
                
                <div class=" name_box col-xs-12 center">
                    <h4><b>{{ recipe.name }}</b></h4>
                </div>
                
                <div class=" allergen_box col-xs-12">
                    
                <p>{{ recipe.description |truncate(65) }}</p>
                
                </div>
                
                <div class=" allergen_box col-xs-12">
                    <div><b>Allergens</b></div>
                    
                {% for item in recipe.allergens %}
                {% if loop.index == 0 or item == "" %}
                <p>None</p>
                {% else %}
                    <span>{{ item | title}}</span>
                {% endif %}
                {% endfor %}
                
                </div>
                
                <div class="cuisine_box col-xs-12">
                    <div><b>Cuisine</b></div>
                {% for item in recipe.cuisine %}
                {% if loop.index == 0 or item == "" %}
                <p>None</p>
                {% else %}
                    <span>{{ item |title}}</span>
                {% endif %}
                {% endfor %}
                </div>
            </div>
        </div>
    </div>
    
{% endfor %}
</div>

<div class="row ordered-by-row">
    <div class="col-xs-12 col-sm-5">
        <p class="ordered-by-title">All Recipes</p>
        <a href="{{url_for('all_recipes')}}" class="see-all">See All</a>
    </div>
</div>

<!--THE ROW FOR THE FIRST 4 RECIPES OF ALL RECIPES IN ALPHABETICAL ORDER -->
<div class="row found_recipe_row">
{% for recipe in all_recipes %}

    <div class="single-recipe-result col-xs-12 col-sm-4 col-md-3">
        <div class="inner_recipe_box">
            <div class="row">
                <div class="col-xs-12 found_image_box">
                    <a href="{{ url_for('update_view_count', recipe_id=recipe._id)}}">
                    <img class="found_image" onerror="this.src='https://upload.wikimedia.org/wikipedia/commons/b/b1/Missing-image-232x150.png'" src="{{ recipe.image }}" alt=" {{ recipe.name }}">
                    </a>
                </div>
                
                <div class=" name_box col-xs-12 center">
                    <h4><b>{{ recipe.name }}</b></h4>
                </div>
                
                <div class=" allergen_box col-xs-12">
                    
                <p>{{ recipe.description |truncate(65) }}</p>
                
                </div>
                
                <div class=" allergen_box col-xs-12">
                    <div><b>Allergens</b></div>
                    
                {% for item in recipe.allergens %}
                {% if loop.index == 0 or item == "" %}
                <p>None</p>
                {% else %}
                    <span>{{ item | title}}</span>
                {% endif %}
                {% endfor %}
                
                </div>
                
                <div class="cuisine_box col-xs-12">
                    <div><b>Cuisine</b></div>
                {% for item in recipe.cuisine %}
                {% if loop.index == 0 or item == "" %}
                <p>None</p>
                {% else %}
                    <span>{{ item |title}}</span>
                {% endif %}
                {% endfor %}
                </div>
            </div>
        </div>
    </div>
    
{% endfor %}
</div>

</main>

{% endblock %}
