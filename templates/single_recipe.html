{% extends 'base.html' %} {% block content %}
<div class="single_recipe">
    <!--SEARCH BOX-->
    <div class="row center">

        <div class="col-xs-12 inline">

            <div class="search-box">
                <p><b>Refine Search by:</b></p>
                <div class="search_btn">
                    <P id='ingredient_btn' class='search-btn'>Ingredient</P>
                </div>
                <div class="search_btn">
                    <P id='cuisine_btn' class='search-btn'>Cuisine</P>
                </div>
                <div class="search_btn">
                    <P id='allergen_btn' class='search-btn'>Allergen</P>
                </div>
                <div class="search_btn">
                    <P id='allergen_and_cuisine_btn' class='search-btn'>Advanced</P>
                </div>
            </div>
            <!--########################## INGREDIENT FORM-->
            <div id="ingredient_search" class="search_category_box">
                <div class="inner-box inline">
                    <form action="{{url_for('find_ingredient')}}" , method="POST">
                        <p><b>Search by Ingredient</b></p>
                        <div class="inline">
                            <input type="text" name="ingredient_category" id="ingredient_category" placeholder='e.g. chicken'>
                        </div>
                        <br>
                        <br>
                        <div class="center">
                            <input class="inline" type="submit" value="Select" />
                            <p class="close-btn inline">Close</p>
                        </div>

                    </form>
                </div>
            </div>
            <!--########################## CUISINE FORM-->

            <div id="cuisine_search" class="search_category_box">
                <div class="inner-box inline">
                    <form action="{{url_for('find_cuisine')}}" , method="POST">
                        <p><b>Select Cuisine</b></p>
                        <div class="inline">
                            <select name="cuisine_category" id="cuisine_category">
                            <option disabled value="" selected>None Selected</option>
                            {% for item in cuisines_json.cuisine|sort %}
                            <option value="{{ item }}">{{ item }}</option>
                            {% endfor %}
                            </select>
                        </div>
                        <br>
                        <br>
                        <div class="center">
                            <input class="inline" type="submit" value="Select" />
                            <p class="close-btn inline">Close</p>
                        </div>

                    </form>
                </div>
            </div>

            <!--########################## END FORM-->
            <!--########################## ALLERGEN FORM-->

            <div id="allergen_search" class="search_category_box">
                <div class="inner-box inline">
                    <form action="{{url_for('find_allergen')}}" , method="POST">
                        <p><b>Select allergen free</b></p>

                        {% for item in allergens_json.allergen|sort %}
                        <div class='allergen_search_checkbox'>
                            <input value="{{ item }}" name="allergen_category" type="checkbox"> {{ item }}</input>
                        </div>
                        {% if loop.index % 3 == 0 %}
                        <br> {% endif%} {% endfor %}
                        <br>
                        <br>
                        <div class="center">
                            <input class="inline" type="submit" value="Select" />
                            <p class="close-btn inline">Close</p>
                        </div>

                    </form>
                </div>
            </div>

            <!--########################## END FORM-->
            <!--########################## ALLERGEN AND CUISINE FROM-->
            <div id="allergen_and_cuisine_search" class="search_category_box">
                <div class="inner-box inline">
                    <form action="{{url_for('find_multiple_categories')}}" , method="POST">
                        <p><b>Select Cuisine</b></p>
                        <div>
                            <select class="search-item" name="find_cuisine" id="find_cuisine">
                                <option value="" selected>None</option>
                                {% for item in cuisines_json.cuisine|sort %}
                                <option value="{{ item }}">{{ item }}</option>
                                
                                
                                {% endfor %}
                            </select>
                        </div>

                        <p><b>Search by Ingredient</b></p>
                        <div class="inline">
                            <input type="text" name="find_ingredient" id="find_ingredient" placeholder='e.g. chicken'>
                        </div>

                        <br>

                        <p><b>Select allergen free</b></p>
                        {% for item in allergens_json.allergen|sort %}
                        <div class='allergen_search_checkbox'>
                            <input value="{{ item }}" name="find_allergen" id="find_allergen" type="checkbox"> {{ item }}</input>
                        </div>

                        {% if loop.index % 3 == 0 %}
                        <br> {% endif%} {% endfor %}
                        <br>
                        <br>
                        <div class="center">
                            <input class="inline" type="submit" value="Select" />
                            <p class="inline close-btn">Close</p>
                        </div>



                    </form>
                </div>
            </div>
            <!--########################## END FORM-->

        </div>
    </div>


    <div class="row single_recipe_row">

        <div class="col-xs-12 center">
            <h2 class=" inline"> {{ recipe.name }}</h2>
            <i class="far fa-eye "></i> <span> {{ recipe.views }} views</span>
        </div>
        <div class="col-xs-12 center">
            <span>By {{ recipe.author }}</span>
        </div>
        <div class="col-xs-12 center">
            <a href="{{ url_for('edit_recipe', recipe_id=recipe._id)}}">Edit Recipe</a>
            <a href="{{ url_for('delete_recipe', recipe_id=recipe._id)}}">Delete Recipe</a>

        </div>
    </div>

    <div class="row single_recipe_row">



    </div>

    <div class="row single_recipe_row">
    </div>

    <div class="row single_recipe_row">

        <div class="col-xs-offset-1 col-xs-10 center">
            <p>{{ recipe.description }}</p>
        </div>
    </div>


    <div class="row single_recipe_row">
        <div class="col-xs-6">
            <div class="row">
                <div class="col-xs-12">

                    <div class="col-xs-6 center">

                        <b>Cuisine:</b> {% for item in recipe.cuisine|sort %}
                        <p>{{ item }}</p>
                        {% endfor %}
                    </div>

                    <div class="col-xs-6 center">

                        <b>Allergens:</b> {% for item in recipe.allergens|sort %}
                        <p>{{ item }}</p>
                        {% endfor %}

                    </div>
                </div>
                <div class="row single_recipe_row">
                    <div class="col-xs-12 flex-box">
                        <div class="flex1 center"><b>Prep Time:</b> {{ recipe.prep_time }}</div>
                        <div class="flex1 center"><i class="far fa-clock"></i><b> Cook Time:</b> {{ recipe.cook_time }}</div>
                        <div class="flex1 center"><i class="fas fa-utensils"></i><b> Servings: </b> {{ recipe.recipe_yield }}</div>
                    </div>
                </div>

                <div class="col-xs-12">
                    <h4 class="">Ingredients</h4>
                </div>
                <div class="col-xs-12">
                    <ul class="no-padding">
                        {% for ingredient in recipe.ingredients %} {% if ingredient != ""%}
                        <li>{{ ingredient }}</li>
                        {% endif %} {% endfor %}
                    </ul>
                </div>
            </div>
        </div>

        <div class="col-xs-6 recipe_image_container">
            <img class="single_recipe_image" src="{{ recipe.image }}"></img>
        </div>
    </div>

    <div class="row single_recipe_row">
        <div class="col-xs-12">
            <h4 class="">Instructions</h4>
        </div>
        <div class="col-xs-12">
            <ol class="no-padding">
                {% for instruction in recipe.instructions %}
                <li>
                    {{ instruction }}
                </li>
                {% endfor %}
            </ol>
        </div>
    </div>





</div>
{% endblock %}
